@prefix bgf: <https://bg-rdf.org/ontologies/bondgraph-framework#> .
@prefix cdt: <https://w3id.org/cdt/> .
@prefix tpl: <https://bg-rdf.org/templates/> .

@prefix : <#> .

#===============================================================================
#
#                   R_e                    R_m          q_C_m
#                    |                      |             |
#                    |                      |             |
#    u_in_e -----> v_1_e -----> GY -----> v_2_m ------> u_C_m
#                    |                      |
#                    |                      |
#                   L_e                    L_m
#
#===============================================================================

:example_A3
    a bgf:BondgraphModel ;
    bgf:usesTemplate
        tpl:electrical.ttl ,
        tpl:mechanical.ttl ;
    bgf:hasBondElement :u_in_e, :R_e, :L_e, :R_m, :L_m, :q_C_m ;
    bgf:hasJunctionStructure :v_1_e, :GY, :v_2_m, :u_C_m .

#===============================================================================

:u_in_e
    a bgf:VoltageSource ;
#       u_in_e = 50{J_per_C}*sin(50{per_s}*2{dimensionless}*pi*t);
    bgf:hasValue """
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <times/>
                    <cn>50</cn>
                    <apply>
                        <sin/>
                        <apply>
                            <times/>
                            <cn>50</cn>
                            <cn>2</cn>
                            <pi/>
                            <ci>t</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    """^^bgf:mathml .

:R_e
    a bgf:ElectricalResistor ;
    bgf:parameterValue [
        bgf:varName "R" ;
        bgf:hasValue "5 Ohm"^^cdt:ucum
    ] .

:L_e
    a bgf:ElectricalInductor ;
    bgf:hasValue "0 A"^^cdt:ucum ;
    bgf:parameterValue [
        bgf:varName "L" ;
        bgf:hasValue "0.2 H"^^cdt:ucum
    ] .

:R_m
    a bgf:MechanicalResistor ;
    bgf:parameterValue [
        bgf:varName "R" ;
        bgf:hasValue "0.4 J.s.m-2"^^cdt:ucum
    ] .

:L_m
    a bgf:MechanicalInductor ;
    bgf:hasValue "0 m/s"^^cdt:ucum ;
    bgf:parameterValue [
        bgf:varName "L" ;
        bgf:hasValue "0.01 J.s2.m-2"^^cdt:ucum
    ] .

:q_C_m
    a bgf:MechanicalCapacitor ;
    bgf:hasValue "0 m"^^cdt:ucum ;
    bgf:parameterValue [
        bgf:varName "C" ;
        bgf:hasValue "0.01 m2/J"^^cdt:ucum
    ] .

#===============================================================================

:v_1_e
    a bgf:OneNode .

:GY
    a bgf:TransformNode ;
    bgf:hasSymbol "Bl" ;
    bgf:hasValue "6 J.s.C-1.m-1"^^cdt:ucum .

:v_2_m
    a bgf:OneNode .

:u_C_m
    a bgf:ZeroNode .

#===============================================================================

:u_in_e.v_1_e
    bgf:hasSource :u_in_e ;
    bgf:hasTarget :v_1_e .

:v_1_e.R_e
    bgf:hasSource :v_1_e ;
    bgf:hasTarget :R_e .

:v_1_e.L_e
    bgf:hasSource :v_1_e ;
    bgf:hasTarget :L_e .

:v_1_e.GY_0
    bgf:hasSource :v_1_e ;
    bgf:hasTarget [
        bgf:element :GY ;
        bgf:port "0"
    ] .

:GY_1.v_2_m
    bgf:hasSource [
        bgf:element :GY ;
        bgf:port "1"
    ] ;
    bgf:hasTarget :v_2_m .

:v_2_m.R_m
    bgf:hasSource :v_2_m ;
    bgf:hasTarget :R_m .

:v_2_m.L_m
    bgf:hasSource :v_2_m ;
    bgf:hasTarget :L_m .

:v_2_m.u_C_m
    bgf:hasSource :v_2_m ;
    bgf:hasTarget :u_C_m .

:u_c.q_C_m
    bgf:hasSource :u_C_m ;
    bgf:hasTarget :q_C_m .

#===============================================================================
